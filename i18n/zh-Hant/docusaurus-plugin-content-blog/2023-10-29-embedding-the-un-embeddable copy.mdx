---
title: "Embedding the Un-Embeddable"
description: "Revealing the secrets of those websites that allow you to embed entire movies, AV1, and videos over 500MB on Discord."
slug: embedding-the-un-embeddable
authors:
- name: Simulping
  title: Maintainer / Encoder
  url: https://github.com/Simulping
  image_url: https://avatars.githubusercontent.com/u/12994794?v=4
tags: [video, discord]
image: /img/discord-embed-blog-image.webp
hide_table_of_contents: false
---

![Feature image](/img/discord-embed-blog-image.webp)
**A 567.14 MB, 12 min 11 s, 2K (2,048 x 858), VP9 + Opus, 6.51 Mbps average, Blender short film "Cosmos Laundromat"**


## 情境

當你在喜愛的 Discord 伺服器和群組聊天中時，可能會看到朋友發送一個奇怪的連結。你可能會在第一眼看到它時覺得有些可疑。這是一個播放電影海報圖片的影片，播放按鈕幾乎在強迫你點擊。自然地，你點擊了它。

<!--truncate-->

影片加載了一秒鐘，令你驚訝的是，這竟然是一部長達 90 分鐘（有時甚至是兩小時）的未授權電影拷貝。如果你對這一切感到困惑，你可能會傻傻地坐在那裡，看著高畫質的電影播放。你可能原以為會看到一個模糊、塊狀、延遲的劣質影片，但這卻超出了你的預期。

![stolen.shoes](/img/stolenshoes-puss.webp)

事實上，*有多個* 網站提供這種服務。目前在撰寫本文時，已有五個這樣的網站。以下是我目前熟悉的一些網站：

- https://stolen.shoes
- https://discord.nfp.is
- https://embeds.video
- https://x266.mov/discord-embed
- https://autocompressor.net/av1


最重要的問題是，**這些網站如何運作？** 讓我們來深入分析一下。

## 但首先，快速聲明

Codec Wiki 明確譴責任何形式的盜版，包括未經授權的版權內容分發。這篇文章的目的是提供教育和資訊。你不應該使用這些工具來侵犯內容創作者的智慧財產權，這樣做會面臨嚴重的法律風險。我們鼓勵讀者尊重版權法，並合法使用我們在此介紹的工具。

## 運作原理

實際上，整個計劃非常簡單，因為它只是利用 HTML 元標籤（如果你熟悉網頁開發，這就像是手到擒來）。

這項技術的內部運作可以分為兩個明顯的部分。我們先來看看它在網站端的運作方式。

### 網站端

如果你查看每個網站的源代碼，你會發現每個網站都有這一特定的代碼行，但它們的順序可能會有所不同：

```html
<meta property="og:image" content="https://example.com/i/someimageforthumbnail.jpg">
<meta property="og:type" content="video.other">
<meta property="og:video:url" content="https://example.com/v/video.mp4">
<meta property="og:video:width" content="1920">
<meta property="og:video:height" content="1080">
```

這些是 HTML 檔案中的 `head` 部分，用來設定文檔的元資料，比如網站的標題或名稱、外觀嵌入、網站圖標等。這些部分通常位於 `<html>` 和 `<body>` 標籤之間。以下是一個靜態 HTML 網站用來播放特定影片的範例：

```html
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico"/>
  <title>some embed site</title>
  <meta property="og:image" content="https://www.themoviedb.org/t/p/original/3U0vksjSY9LWe3Dqfr6xkgd3iQP.jpg">
  <meta property="og:type" content="video.other">
  <meta property="og:video:url" content="https://upload.wikimedia.org/wikipedia/commons/3/36/Cosmos_Laundromat_-_First_Cycle_-_Official_Blender_Foundation_release.webm">
  <meta property="og:video:width" content="2048">
  <meta property="og:video:height" content="858">
</head>
<body>
  <h1>Hi</h1>
  <p>Just your friendly neighborhood video embed site</p>
  </body>
</html>
```

< br />
這些互動網站通常會使用即時腳本，例如 Javascript 框架，來處理影片和縮略圖，以便可以嵌入 Discord（或其他平台）。常見的框架包括 NodeJS、ExpressJS 和 Svelte。

### Discord 的端

一般來說，Discord 的媒體嵌入器會對用戶發送的直接影片鏈接施加 50 MiB 的大小限制。不過，在這種情況下，Discord 會先顯示縮略圖，而不是影片本身。可以說，這個鏈接透過顯示「假面孔」來「欺騙」 Discord。

## 優勢與限制

經過長時間的觀察、測試，並與這些網站的創建者交流後，目前這種漏洞的優勢和限制如下：

#### 優勢

- 可以嵌入一些不兼容網頁的編解碼器，例如 [HEVC](https://wiki.x266.mov/docs/video/HEVC) 在 [MP4/MOV](https://wiki.x266.mov/docs/introduction/terminology#mp4--m4v) 格式中，但用戶需要使用兼容的瀏覽器，例如 [Thorium](https://thorium.rocks) 或 Safari 13 以上版本。
- 沒有最大大小限制。你可以嵌入與原 Bluray 大小相同的影片，儘管這樣做需要適當的法律授權，或者如果是創用 CC 授權的電影如 Big Buck Bunny，只要遵守相應的授權條款。這也意味著你可以無限制地將高位元率的遊戲片段發送給朋友，前提是你有地方可以上傳它們。

#### 限制

- 只能使用 [直接連結](https://simple.wikipedia.org/wiki/Hotlinking)，即直接鏈接到影片檔案本身，並以適當的檔案副檔名結尾，如 `.mp4`。像 Google Drive 或 OneDrive 這樣的雲端服務無法作為儲存解決方案。
- 不能將 Discord 的 CDN（cdn.discordapp.com）作為影片來源。我推測這是因為 Discord 的代理會阻止超過 50 MiB 的嵌入，但 **只有 discord.nfp.is 可以做到這一點**，因為它 **代理了 cdn.discordapp.com**。
- 不能嵌入分辨率超過 3840 x 2160 的影片，Discord 對所有影片施加了這一硬性限制，因為發現有些影片可以正常播放，但在播放過程中會被惡意縮放到極端的分辨率，導致 Discord 崩潰。

## 網站之間的差異

目前已知有五個這樣的網站，它們都提供類似的功能，但因為它們的特色和功能有所不同，有些網站可能會對你更具吸引力。

以下是這些網站，每個網站都有一個特別的優勢：

- https://stolen.shoes - 知名度高，因為它是最早的。
- https://discord.nfp.is - 可以使用 Discord CDN 作為影片來源。
- https://embeds.video - 可以立即將影片來源輸入到 URL（`https://embeds.video/https://example.com/v/video.mp4`）。
- https://x266.mov/discord-embed - 吸引人的域名，佈局簡單。
- https://autocompressor.net/av1 - 提供大量資訊，功能相當先進。

這就是技術概述的結束！接下來，我們將探討這個漏洞的歷史。

## The Lore

### Dwayne

In around April of 2022, a Reddit user going by the name of u/CreativeGamer03 [posted a video on r/discordapp](https://www.reddit.com/r/discordapp/comments/u96kky/someone_sent_this_in_the_memes_channel_and_bruh) of a link where a GIF of Dwayne "The Rock" Johnson plays caption with "Is this a GIF or is it a video?" When played, a low-quality music video of Rick Astley's "Never Gonna Give You Up" plays.

The link used is now unfortunately [removed](https://archuser.de/the-rock).

### Discovery
On 23rd June 2022, a Discord user *Clybius* on the AV1 Community server asked people for [VP9](https://wiki.x266.mov/docs/video/VP9) or [H.264](https://wiki.x266.mov/docs/video/AVC) videos that were over 100 MB in size. At the time the current 500 MB nitro tier did not exist. They then decided to use a 59 minute 1080p sample video of nature scenery from around the world with a thumbnail featuring a GIF of a waterfall to test the exploit. It worked.

He tried shortly afterward with [AV1](https://wiki.x266.mov/docs/video/AV1). Eureka, it also worked:

![AV1](/img/clybius-av1.webp)

Clybius confirmed that this could be patched if discovered. He cites having had the idea from the Dwayne Johnson example above, but forgetting about it for a couple of months. So, it seems this entire concept stemmed from a silly rickroll.

![Dwayne](/img/clybius-dwayne.webp)

### The Experiments & Interactive Site

After the discovery of AV1 embedding, experimentation brought about the discovery that *any* video codec will work as long as the user can decode/play the codec and the container/extension is an MP4, MOV, or WebM. These are all traditionally web-compatible containers. If you're interested in learning about containers, please see the [Containers](https://wiki.x266.mov/docs/introduction/terminology#container) section on the [Terminology](https://wiki.x266.mov/docs/introduction/terminology) page.

This applies to HEVC, ProRes, [xHE-AAC](https://wiki.x266.mov/docs/audio/AAC#xhe-aac), and other bizarre codecs that are rarely seen on the Web.

While experimentating, Clybius converted one their idle domains `stolen.shoes` into an interactive embedder that provided a textbox for a video URL, a thumbnail URL, a width value, & a height value for the desired video. This would be the first website for Discord embedding.

### Virality

It's not long before people outside of the AV1 Community discovered `stolen.shoes`, and its popularity increased rapidly. Its use usually involved the illicit distribution of full-length, unauthorized copies of movies; this sometimes happened very shortly after some movies were released. There were a couple notable instances of this happenening that caused quite the stir online each time.

- The first instance featured the DreamWorks sequel of "Puss in Boots (2011)", "Puss in Boots: The Last Wish (2022)". A 1080p video sourced from a streaming site was the first wake up call that attracted attention to the existence of these embed sites. This example used `stolen.shoes`.

![puss](/img/stolenshoes-puss.webp)

- The second instance was when highly-anticipated animated film "The Super Mario Bros. Movie (2023)" produced by Illumination, Universal Studios, and Nintendo was spread around Discord. It was first spotted as a Cam (A camera recording by someone in theaters), then as it went out on streaming services a different link appeared but spread faster and with upgraded 1080p quality. Both used `stolen.shoes` as the embed site.

![mario](/img/stolenshoes-mario.webp)

- The third instance is very recent as of the day this was posted. A streaming-service sourced "Five Nights at Freddy's (2023)" was spread around since the movie released both in theaters and streaming service (Peacock) day one, and it gained steam extremely fast as most people had not seen it yet. Currently, this illegal novelty is gaining [hundreds of upvotes within the r/discordapp subreddit](https://www.reddit.com/r/discordapp/comments/17hx45y/is_discordnfp_an_ip_grabber/). The copy seems to be a compressed 720p encode. This example used `discord.nfp.is`.

![fnaf](/img/discordnfpis-fnaf.webp)

Note the ones listed here are the ones that I saw become extremely popular. There may be lesser known links that have been spread around privately or just did not cause enough noise for me to notice. Some less popular examples I've noticed, featuring more illicit copyrighted content distribution: 
- Top Gun Maverick (2022)
- The SpongeBob trilogy (2005/2015/2020)
- Spider-Man: Across the Spider-Verse (2023)


## Closing

The ability to embed unusually large videos on Discord has enabled both positive and negative use cases. On the one hand, it allows high-quality content to be shared easily among friends. However, it has also facilitated mass copyright infringement by empowering virtually anyone with a Discord accound to freely spread pirated movies.

While this is fascinating from a technical perspective, embedding techniques like these tread a fine ethical line. As with anything, it is important to be mindful of how our actions affect others, and I should remind everyone that content creators deserve to be compensated for their work. As users, we should support them by accessing their content via legitimate platforms.

It is hard to say how long this exploit will continue to be usable. Instead of enabling piracy, which may cause Discord to be more likely to patch this exploit if they see it as a serious threat, let's instead use these capabilities responsibly to share our own creations, gaming highlights, and other media which we can share legally. Given some thoughtfulness, perhaps we can find a fair balance between respecting copyright law and appeasing Discord's sensibilities while allowing some creative flexibility on the platform.

Thank you for reading this blog post, I hope you learned something!

---
title: Color Formats
sidebar_position: 2
---



# 色彩格式

為了表示顏色值，需要確定一種色彩格式。色彩格式主要包括三個部分：
[色彩模型](#color-models)（包括[元件順序](#component-order)以及有時的
[色彩採樣](#chroma-subsampling)）、[bit-depth](#bit-depth)，
以及是否為[打包格式或平面格式](#packed-vs-planar)。
在某些情況下，[endianness](#endianness) 也可能是需要考慮的因素。

## 色彩模型

色彩模型是一種用於在影片或圖像中以資料形式表示顏色的方法。
不同的色彩模型以不同方式儲存顏色和亮度訊息。雖然有許多不同的色彩模型，
本節將重點介紹那些最常用於圖像和影片的模型。

### RGB

RGB 可能是最為人熟知的色彩模型，主要用於圖像編碼。RGB 包含紅色、綠色和藍色三個顏色通道，這
些通道會合併以確定每個像素的顏色。RGB 是顯示器和電視顯示圖像時所使用的最終色彩模型，因為屏幕上的像素由紅、綠、藍三種 LED 組成。
儘管如此，RGB 不常用於影片編碼，因為其他色彩模型能提供更高的壓縮效率。

### YUV

YUV，也稱為 YCbCr，是影片編碼中最常用的色彩模型。它由三個組件構成：Y（亮度，Luma）表示亮度，另外兩個色彩平面則代表顏色。一般來說，影片播放器需要將 YUV 轉換成 RGB 才能顯示，但使用 YUV 進行編碼比 RGB 有明顯的壓縮優勢。

YCbCr 的主要優勢在於色彩採樣技術。這意味著色彩（顏色）組件可以用低於亮度組件的分辨率進行編碼，
從而減少檔案大小。你可以在[後面](#chroma-subsampling)了解更多關於色彩採樣的資訊。

### 表示順序

色彩模型中的元件順序通過簡單地書寫出來來表示。例如，`RGB` 表示紅色在前，其次是綠色，最後是藍色；而 `BGR` 則表示藍色在前，綠色在中，紅色在最後。

## Bit depth

Bit depth 指的是每個樣本值的位元數。Bit depth 的表示方式主要有兩種：

- 每個元件的位元數(bits)。例如，`RGB888` 表示 `RGB 色彩模型，
每個顏色通道有 8 bits`，而 `RGB565` 表示 `RGB 色彩模型，
紅色通道 5 位，綠色通道 6 位，藍色通道 5 位`。
- 每個樣本的位元數。例如，`RGB24` 表示 `RGB 色彩模型，紅色、
綠色和藍色通道合計 24 位元`。這種表示方式不夠精確，
因為無法確定每個通道的具體位數。`RGB565`、`RGB556` 和
 `RGB655`（儘管後兩者不太合理，因為眼睛對綠光最敏感）都被簡稱為 `RGB16`。

## 打包格式 vs 平面格式

色彩元件可以以兩種方式儲存：打包格式，即所有元件交錯在一起（例如 `RGB`）：

```
樣本編號： 1   2   3   4   5
資料：     RGB RGB RGB RGB RGB
```

或分開儲存，每個元件單獨儲存：

```
樣本編號： 1 2 3 4 5
資料：     R R R R R...
資料：     G G G G G...
資料：     B B B B B...
```

在平面格式中，很多操作的實現較為簡單，因為可以一次實現算法，然後對所有平面進行操作。相對而言，打包格式較為簡單，且常用於硬件中。[^\vlc-wiki-yuv]

## 端序(Endianness)

不同的計算機架構以不同的方式儲存數字。了解更多訊息，請參閱[維基百科端序條目](//wikipedia.org/wiki/Endianness)。主要有兩種方式來儲存超過 8 位的數字（1 是最低有效字節，4 是最高有效字節，這裡指的是 4 字節）：

- 最高有效字節優先，小端序，`4321`。這是 x86 系列處理器所使用的方式。
- 最低有效字節優先，大端序，`1234`。這是 PowerPC 系列處理器所使用的方式。

這對色彩格式很重要，因為一些計算機可能會以其本地端序儲存資料。VapourSynth 似乎不關心端序，但 FFmpeg 會考慮這一點。

例如，`RGB565` 可能以 `12` 或 `21` 的順序儲存兩個字節，若讀取順序錯誤，可能會產生錯誤的資料。

## 色彩採樣

在 [Y'CbCr](#yuv) 信號中，有三種主要的色彩採樣變體：

- 4:2:0，垂直和水平方向的色彩解析度各為一半
- 4:2:2，水平方向的色彩解析度為一半，垂直方向為全解析度
- 4:4:4，色彩解析度完整（無子採樣）

4:2:2 在實際應用中並不比其他選項更有優勢，因此本指南將重點關注 4:2:0 和 4:4:4。

4:2:0 是影片中最常用的格式，幾乎所有 DVD、藍光光碟、相機錄影等都使用 4:2:0 子採樣。這是因為大多數情況下，人眼不容易察覺色彩解析度的減少。對於普通情況，使用 4:4:4 的效果提升並不顯著。

但也有一些例外。最顯著的是螢幕錄製。像文本覆蓋、遊戲介面等細緻的顏色依賴細節，
可能會因色彩採樣而變得模糊，影響影片的清晰度。因此，建議在螢幕錄製時使用 4:4:4 子採樣，而在其他大多數情況下使用 4:2:0 子採樣。

## 常見格式

| VS 名稱      | FFmpeg 名稱                                                                 | 意義                                                                                                 |
| ------------ | ---------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------- |
| `GRAY8`      | `gray8`                                                                      | 只有亮度，8 位元，打包格式                                                                         |
| `GRAY16`     | `gray16le`, `gray16be` (後綴指定 [字節序](#endianness))                        | 只有亮度，16 位元                                                                                   |
| `RGB888`     | `rgb24`                                                                      | 紅色、綠色、藍色，每個分量 8 位元                                                                  |
| `YUV420P8`   | `yuv420p`                                                                    | 亮度、藍色色彩、紅色色彩，每個分量 8 位元，平面格式，4:2:0 [子取樣](#chroma-subsampling)             |
| `YUV422P8`   | `yuv422p`                                                                    | 亮度、藍色色彩、紅色色彩，每個分量 8 位元，平面格式，4:2:2 子取樣                                                                                |
| `YUV444P8`   | `yuv444p`                                                                    | 亮度、藍色色彩、紅色色彩，每個分量 8 位元，平面格式，無子取樣                                                                                     |
| `YUV420P10`  | `yuv420p10le`, `yuv420p10be`                                                | 亮度、藍色色彩、紅色色彩，每個分量 10 位元，平面格式，4:2:0 子取樣                                                                                |
| `YUV422P10`  | `yuv422p10le`, `yuv422p10be`                                                | 亮度、藍色色彩、紅色色彩，每個分量 10 位元，平面格式，4:2:2 子取樣                                                                                |
| `YUV444P10`  | `yuv444p10le`, `yuv444p10be`                                                | 亮度、藍色色彩、紅色色彩，每個分量 10 位元，平面格式，無子取樣                                                                                   |

## 參考資料

[^vlc-wiki-yuv]: [YUV - VideoLAN Wiki](https://wiki.videolan.org/YUV/#Packed_formats)
